"0","# set data path"
"0","data_dir <- ""data"""
"0","# read data document name"
"0","csv_files <- fs::dir_ls(data_dir, regexp = ""\\.csv$"")"
"0","# dataset name"
"0","dataset_name <- c("
"0","  ""Casualties"", ""Expenditure"", ""Transport"","
"0","  ""Vehicles"", ""Cards"", ""Network"", ""Purposes"""
"0",")"
"0","# read data and assign names to dataset"
"0","for (i in 1:7) {"
"0","  assign(dataset_name[i], readr::read_csv(csv_files[i]))"
"0","}"
"0",""
"0","#### data wrangling ####"
"0",""
"0","# select total number of casualty outcomes"
"0","Casualties <- Casualties %>%"
"0","  select(-c(Measurement, Units)) %>%"
"0","  filter(Outcome == ""Killed Or Seriously Injured"") %>%"
"0","  spread(Outcome, Value) %>%"
"0","  filter(Age == ""All"" & Gender == ""All"") %>%"
"0","  select(-c(Age, Gender))"
"0",""
"0","# rename variable name"
"0","Expenditure <- Expenditure %>%"
"0","  select(-c(Measurement, Units)) %>%"
"0","  rename(Expenditure = Value)"
"0",""
"0","# remove variables at the whole Scotland level"
"0","Transport <- Transport %>%"
"0","  select(-c(Measurement, Units)) %>%"
"0","  filter(`Indicator (public transport)` %in% c("
"0","    ""Number Of Passenger Train Stations"","
"0","    ""Percentage Of Adults Reporting that they are Very or Fairly Satisfied with Public Transport"""
"0","  )) %>%"
"0","  spread(`Indicator (public transport)`, Value)"
"0",""
"0","Vehicles <- Vehicles %>%"
"0","  select(-c(Measurement, Units)) %>%"
"0","  spread(`Indicator (road vehicles)`, Value)"
"0",""
"0","# retain card numbers of all people"
"0","Cards <- Cards %>%"
"0","  select(-c(Measurement, Units)) %>%"
"0","  spread(Age, Value) %>%"
"0","  select(-`60 years and over`) %>%"
"0","  rename(Cards = All)"
"0",""
"0","Network <- Network %>%"
"0","  select(-c(Measurement, Units)) %>%"
"0","  spread(`Indicator (road network traffic)`, Value)"
"0",""
"0","Purposes <- Purposes %>%"
"0","  select(-c(Measurement, Units)) %>%"
"0","  spread(`Indicator (travel to work)`, Value)"
"0",""
"0","# merge all dataset into one complete dataset by 'FeatureCode' and 'DateCode'"
"0","Data <- Expenditure %>%"
"0","  left_join(Casualties,"
"0","    by = c("
"0","      ""FeatureCode"" = ""FeatureCode"","
"0","      ""DateCode"" = ""DateCode"""
"0","    )"
"0","  ) %>%"
"0","  left_join(Cards,"
"0","    by = c("
"0","      ""FeatureCode"" = ""FeatureCode"","
"0","      ""DateCode"" = ""DateCode"""
"0","    )"
"0","  ) %>%"
"0","  left_join(Network,"
"0","    by = c("
"0","      ""FeatureCode"" = ""FeatureCode"","
"0","      ""DateCode"" = ""DateCode"""
"0","    )"
"0","  ) %>%"
"0","  left_join(Purposes,"
"0","    by = c("
"0","      ""FeatureCode"" = ""FeatureCode"","
"0","      ""DateCode"" = ""DateCode"""
"0","    )"
"0","  ) %>%"
"0","  left_join(Transport,"
"0","    by = c("
"0","      ""FeatureCode"" = ""FeatureCode"","
"0","      ""DateCode"" = ""DateCode"""
"0","    )"
"0","  ) %>%"
"0","  left_join(Vehicles,"
"0","    by = c("
"0","      ""FeatureCode"" = ""FeatureCode"","
"0","      ""DateCode"" = ""DateCode"""
"0","    )"
"0","  )"
"0","# rename variables"
"0","names(Data) <- c("
"0","  ""FeatureCode"", ""DateCode"", ""Expenditure"", ""Killed_Injured"","
"0","  ""Cards"", ""Congestion"", ""Repair"", ""Mileage"", ""Work_Bus"","
"0","  ""Business"", ""School"", ""Commuting"", ""Work_Cycling"", ""Education"","
"0","  ""Health"", ""Shopping"", ""Work_Train"", ""Work_Walking"", ""Train_Stations"","
"0","  ""Satisfaction"", ""One_Car"", ""More_Car"", ""Without_Car"", ""Petrol_Diesel"""
"0",")"
"0","glimpse(Data)"
"1","Rows: 460"
"1",""
"1","
"
"1","Columns: 24"
"1",""
"1","
"
"1","$ FeatureCode    [3m[38;5;246m<chr>[39m[23m ""S12000005"", ""S12000006"", ""S12000008"", ""S12000010"",~
$ DateCode       [3m[38;5;246m<dbl>[39m[23m 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 200~
$ Expenditure    [3m[38;5;246m<dbl>[39m[23m 3541, 20466, 12145, 6818, 11185, 7428, 12049, 29490~
$ Killed_Injured [3m[38;5;246m<dbl>[39m[23m 25, 144, 53, 50, 17, 20, 85, 197, 38, 62, 39, 82, 8~
$ Cards          [3m[38;5;246m<dbl>[39m[23m NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ Congestion     [3m[38;5;246m<dbl>[39m[23m 13.8, 5.1, 12.9, 14.9, 15.5, 1.1, 12.7, 11.1, 9.5, ~
$ Repair         [3m[38;5;246m<dbl>[39m[23m NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ Mileage        [3m[38;5;246m<dbl>[39m[23m NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ Work_Bus       [3m[38;5;246m<dbl>[39m[23m 6.2, 5.8, 10.4, 8.2, 7.8, 18.1, 10.0, 7.3, 9.4, 20.~
$ Business       [3m[38;5;246m<dbl>[39m[23m 6, 6, 4, 5, 3, 7, 4, 8, 2, 8, 6, 4, 14, 4, 8, 4, 6,~
$ School         [3m[38;5;246m<dbl>[39m[23m 53.3, 46.4, 41.9, 60.5, 44.2, 20.0, 46.8, 48.9, 38.~
$ Commuting      [3m[38;5;246m<dbl>[39m[23m 23, 27, 27, 29, 19, 28, 24, 29, 21, 28, 33, 23, 25,~
$ Work_Cycling   [3m[38;5;246m<dbl>[39m[23m 2.7, 0.9, 0.0, 2.7, 2.4, 0.0, 1.2, 2.0, 0.0, 0.0, 5~
$ Education      [3m[38;5;246m<dbl>[39m[23m 2, 2, 2, 2, 4, 3, 3, 2, 3, 6, 2, 1, 1, 3, 1, 2, 2, ~
$ Health         [3m[38;5;246m<dbl>[39m[23m 2, 3, 3, 1, 2, 3, 3, 2, 4, 1, 2, 2, 3, 3, 2, 2, 2, ~
$ Shopping       [3m[38;5;246m<dbl>[39m[23m 20, 24, 17, 23, 12, 21, 26, 19, 27, 18, 18, 20, 21,~
$ Work_Train     [3m[38;5;246m<dbl>[39m[23m 3.1, 0.0, 3.2, 6.0, 8.4, 0.0, 6.5, 1.3, 9.5, 0.0, 0~
$ Work_Walking   [3m[38;5;246m<dbl>[39m[23m 11.4, 20.9, 11.6, 12.6, 3.8, 10.7, 9.8, 16.3, 11.6,~
$ Train_Stations [3m[38;5;246m<dbl>[39m[23m NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ Satisfaction   [3m[38;5;246m<dbl>[39m[23m NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,~
$ One_Car        [3m[38;5;246m<dbl>[39m[23m 45.9, 47.6, 44.8, 43.4, 39.5, 48.9, 43.1, 49.8, 39.~
$ More_Car       [3m[38;5;246m<dbl>[39m[23m 28.8, 28.6, 25.9, 27.3, 41.7, 24.7, 28.4, 28.9, 21.~
$ Without_Car    [3m[38;5;246m<dbl>[39m[23m 25.4, 23.8, 29.3, 29.3, 18.8, 26.4, 28.5, 21.3, 38.~
$ Petrol_Diesel  [3m[38;5;246m<dbl>[39m[23m 19, 165, 79, 61, 60, 13, 104, 165, 38, 43, 46, 53, ~"
"1",""
"1","
"
"0","# Transform the DateCode as a factor"
"0","Data$DateCode <- as.factor(Data$DateCode)"
